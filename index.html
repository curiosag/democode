<!DOCTYPE html>
<html>

<head>
<meta charset='utf-8'>
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="description" content="Code : ">

<link rel="stylesheet" type="text/css" media="screen"
	href="stylesheets/stylesheet.css">

<title>Code</title>
<script src="jquery.js" type="text/javascript"></script>
<script src="demoCode.js" type="text/javascript"></script>

<script type="text/javascript">
	//<![CDATA[
	â€‹
	//]]>
</script>

</head>

<body onload="init()">

	<!-- HEADER -->
	<div id="header_wrap" class="outer">
		<header class="inner">
			<a id="forkme_banner" href="https://github.com/curiosag/democode">View
				on GitHub</a>

			<h1 id="project_title">Code</h1>
			<h2 id="project_tagline"></h2>

			<section id="downloads">
				<a class="zip_download_link"
					href="https://github.com/curiosag/democode/zipball/master">Download
					this project as a .zip file</a> <a class="tar_download_link"
					href="https://github.com/curiosag/democode/tarball/master">Download
					this project as a tar.gz file</a>
			</section>
		</header>
	</div>

	<!-- MAIN CONTENT -->
	<div id="main_content_wrap" class="outer">
		<section id="main_content" class="inner">

			<p>
				A selection of sample code, from production code as well as proof of
				concepts and studies, with brief descriptions of the related
				projects. Some of them also appear in the <a href="./projects.html">
					list of projects</a>.
			</p>

			<p>Please note, that the code samples are for most parts quite
				abbreviated and altered to protect the rights of the employer and/or
				customer. For some proofs of concept there are compilable solutions,
				though.</p>

			<ul id="tabs">
				<li><a href="#Oracle">Oracle</a></li>
				<li><a href="#DotNet">C#</a></li>
				<li><a href="#Delphi">Delphi</a></li>
				<li><a href="#Java">Java</a></li>
				<li><a href="#JavaScript">Java&#47;JavaScript&#47;Octave</a></li>
			</ul>

			<div class="tabContent" id="Oracle">
				<h3>ELT</h3>
				<div>
					application/business-logic as triggers and Pl/Sql. <br> <br>ELT-Jobs
					were sort of everything-within-oracle version of ETL, eventually
					feeding a master data management system, also on Oracle. <br>
					<br>Initial extraction was done with Oracle Loader, loading <a
						href="https://github.com/curiosag/democode/blob/master/Oracle/ETL/LoaderFiles/RatingLoaderA.dat">comma
						separated </a> and <a
						href="https://github.com/curiosag/democode/blob/master/Oracle/ETL/LoaderFiles/RatingLoaderB.dat">fixed
						length </a> formats to <a
						href="https://github.com/curiosag/democode/tree/master/Oracle/ETL/DDL">staging
						tables</a>, non-recoverable and non-logged in append mode. Wherever
					possible type conversion was left to the loader too, as in the
					examples shown. <br> <br>Where not, type conversion was
					handled in <a
						href="https://github.com/curiosag/democode/blob/master/Oracle/ETL/PlSql/v_price_transf_eval.sql">
						transformation views</a>, usually simultaneously with the application
					of business rules. The latter could be rather elaborate functions
					like the peculiar amend date decoding in <a
						href="https://github.com/curiosag/democode/blob/master/Oracle/ETL/PlSql/PRO%23.pkb">
						this package</a> (check_amenddt, test_amend_date), where also the
					default insert-from-view error handling is shown (load_data). <br>
					<br>In one case I was happy to find an occasion to apply a <a
						href="https://github.com/curiosag/democode/blob/master/Oracle/ETL/PlSql/PipelinedFunctionConvertRawRecord.sql">
						parallel pipelined function </a> (plus the related <a
						href="https://github.com/curiosag/democode/blob/master/Oracle/ETL/PlSql/TransformRawRecord%23.pkb">
						implementing package </a> for the decoding proper) to extract raw
					values from a colon-separated-key-value-pairs format to feed a <a
						href="https://github.com/curiosag/democode/blob/master/Oracle/ETL/PlSql/v_transform_price.sql">
						subsequent transformation view </a> and <a
						href="https://github.com/curiosag/democode/blob/master/Oracle/ETL/PlSql/TransformAndLoad%23.pkb">
						loading </a> to the final staging table. In this case the <a
						href="https://github.com/curiosag/democode/blob/master/Oracle/ETL/LoaderFiles/TrivialLoader.dat">Oracle
						loader file</a> is trivial. <br> <br>Business rule views
					also could come in their own right, like in <a
						href="https://github.com/curiosag/democode/blob/master/Oracle/ETL/PlSql/v_cp_rating_eval.sql">
						this example</a> from rating processing, where the analytical
					functions of Oracle handed themselves nicely to implement a given
					set of requirements. <br> <br>Rating processing for
					different providers proved to be uniform enough to apply the same
					strategy to all of them <a
						href="https://github.com/curiosag/democode/blob/master/Oracle/ETL/PlSql/RTG_UTIL%23.pkb">by
						constructing sql at runtime </a> (uniform table names were no option).
					Access to the master data was the bottleneck, therefore caching
					(g_mdm_classnames, FUNCTION get_class_name) and one time copies of
					relevant master data (e.g. rating symbols, PROCEDURE
					collect_symbols) were employed and table statistics kept up to date
					(gather_table_stats).

				</div>
				<h3>Master data management synchronization</h3>
				Master data management synchronization usually meant, to apply
				sanity checks, business rules and mappings in Pl/Sql to incoming
				data and feed the results through a Pl/Sql-api to the database while
				considering defined mutation rules. The sample is a tiny fraction of
				<a
					href="https://github.com/curiosag/democode/blob/master/Oracle/Integration/LOAD_INSTRUMENTS%23.pkb">asset
					synchronization</a>, a rather central task. <br> <br>Since
				heavy use of objects was made on all levels, occasionally object
				representations had to be <a
					href="https://github.com/curiosag/democode/blob/master/Oracle/Integration/deserialize_objects%23.pkb">serialized</a>.
				Aside custom ELT, data traveled via Xml messaging, including <a
					href="https://github.com/curiosag/democode/blob/master/Oracle/Integration/XmlGen%23.pkb">creation
					and sending</a> as well as consumption. The latter used <a
					href="https://github.com/curiosag/democode/blob/master/Oracle/Integration/XmlDomManipulation%23.pkb">DOM-access</a>
				and <a
					href="https://github.com/curiosag/democode/blob/master/Oracle/Integration/XmlXQuery%23.pkb">XQuery</a>.
				<div></div>
			</div>

			<div class="tabContent" id="DotNet">
				<div>
					<p>
						A study to use Linq syntax to express <a
							href="https://github.com/curiosag/MicroWorkflow/tree/master/DataProcessingByLinq/Program.cs">data
							processing sequences</a> with the goal to create non-graphical
						workflow definitions that can be suspended, persisted and resumed.
						It is possible, but very limited. F# computation sequences could
						be used the same way, being more expressive.
					</p>
					<p>
						A byproduct that eventually became production code was a simple
						high level <a
							href="https://github.com/curiosag/MicroWorkflow/blob/master/DataProcessingByLinq/Ftp/Ftp.cs">ftp
							class</a> with specialized subclasses to provide straight forward ftp
						functionality, implemented with .net web requests, and <a
							href="https://github.com/curiosag/MicroWorkflow/blob/master/DataProcessingByLinq/Ftp/FileBasedFtpEmulator.cs">emulated
							ftp</a> functionality operating on the file system. The latter was
						used to emulate the ftp delivery logic of different data
						providers.
					</p>

					<p>
						Proof of concept and pilot application - generate an <a
							href="https://github.com/curiosag/democode/blob/master/DotNet/TkModel/TkMeta/FromXsd/Doc.cs">object
							model</a> from meta-data definitions from Six Telekurs and show, that
						it is possible to <a
							href="https://github.com/curiosag/democode/blob/master/DotNet/TkModel/TkMeta/SampleQuery_Baskets.cs">re-implement
							existing sql-queries</a> on that data-feed using the object model and
						Linq. The final model provided by another party was closely
						related. On that I based <a
							href="https://github.com/curiosag/democode/blob/master/DotNet/TkModel/Extractions/Extraction.cs">core
							production code elements</a> of the initial implementation of <a
							href="https://github.com/curiosag/democode/blob/master/DotNet/TkModel/Extractions/BondMonNormalizer.cs">
							extractions</a>, thought it was not appropriate to mimic Sql there.
					</p>
				</div>
			</div>

			<div class="tabContent" id="Delphi">
				<div>
					<p>
						Elements of a client-server data processing framework, with a
						client part that defines, initiates and monitors sequences of data
						processing and a server part, responsible for execution and
						co-ordination of concurrent client requests. Requests came in form
						of data processing messages (<a
							href="https://github.com/curiosag/democode/blob/master/Delphi/ClientServerFramework/uDpMessageCommon.pas">TDpMessageCommon</a>),
						bundling sequences of commands and their execution parameters. The
						server translates (<a
							href="https://github.com/curiosag/democode/blob/master/Delphi/ClientServerFramework/uActionFactory_b.pas">uActionFactory_b</a>,
						<a
							href="https://github.com/curiosag/democode/blob/master/Delphi/ClientServerFramework/uActionFactoryFetchExternalData.pas">uActionFactoryFetchExternalData</a>)
						them to actions (<a
							href="https://github.com/curiosag/democode/blob/master/Delphi/ClientServerFramework/uAction_b.pas">uAction_b</a>,
						<a
							href="https://github.com/curiosag/democode/blob/master/Delphi/ClientServerFramework/uDbActions.pas">uDbActions</a>)
						which eventually get executed. Client- server- and associated
						proxy-classes are not included here.
					</p>

					<p>
						Elements of a generic storage and data retrieval framework, that I
						implemented following an abstract design (<a
							href="https://github.com/curiosag/democode/blob/master/Delphi/DataAccessLayer/uDataAccessLayer_a.pas">uDataAccessLayer_a</a>)
						aimed at the provider structure level. Everything down to the
						physical tables had to be spelled out. It supports native
						simultaneous access to Oracle, Db2 (including transparent DML
						array loading), DbIsam and non-natively anything that BDE
						supported. Data writing is tree oriented and handles update
						operations transparently for using classes. It is meta-data
						driven, meta-data is a terse pointer structure roughly like <a
							href="https://github.com/curiosag/democode/blob/master/Delphi/DataAccessLayer/uMd.pas">this</a>
						one. The abstract level was backed by custom classes and
						eventually by a general table access layer (<a
							href="https://github.com/curiosag/democode/blob/master/Delphi/DataAccessLayer/uCustomTableAccess.pas">uCustomTableAccess</a>)
						with database specific implementations, hiding the nasty details.
						For examples of nasty details see <a
							href="https://github.com/curiosag/democode/blob/master/Delphi/DataAccessLayer/uOraTableExt.	pas">uOraTableExt</a>,
						<a
							href="https://github.com/curiosag/democode/blob/master/Delphi/DataAccessLayer/uSQLFormat_DB2.pas">uSQLFormat_DB2</a>
						and <a
							href="https://github.com/curiosag/democode/blob/master/Delphi/DataAccessLayer/uDB2Writer.pas">uDB2Writer</a>.
						Database structures get generated from meta-data and can be
						altered automatically on meta-data changes.
					</p>
				</div>
			</div>
			<div class="tabContent" id="Java">
				<div>
					<h4>Goolge Fusion Tables Query Console</h4>

					<p>
						<a href="https://support.google.com/fusiontables#topic=1652595">Google
							fusion tables</a> are handy, but there wasn't a tool to quickly hack
						some <a
							href="https://developers.google.com/fusiontables/docs/v2/sql-reference">fusion
							tables sql</a>, so I made one. From the sales folder:
					</p>
					<p>
						<em>For a quick start with Google fusion tables sql: code
							completion, context sensitive sql snippets with table or column
							parameters, refer to tables by name or ID, syntax highlighting
							covering syntactic and semantic errors. Delete, rename and copy
							tables by sql. </em>
					</p>

					<p>
						<code>technology</code>
						: Java7, Antlr4, Google fusion tables api v2, RSyntaxTextArea code
						editor and autocomlete component, bash scripting, JUnit, Maven, Eclipse Mars, Git, Meld diff
					</p>
					<ul>
						<li>Article on <a
							href="http://www.codeproject.com/Tips/1074347/Instant-SQL-Queries-for-Google-Fusion-Tables">codeproject.com</a></li>
						<li><a href="http://curiosag.github.io/ftc/">project page</a></li>
						<li>Code on <a href="https://github.com/curiosag/ftc">Github</a></li>
					</ul>
				</div>
			</div>

			<div class="tabContent" id="JavaScript">
				<div>

					<h4>Intelligent Advertisement Scraping Framework</h4>
					<p>In Vienna you have to be fast, if you don't want to give a
						lot of bucks to the landlord, so I needed a near real time
						advertisement scraper with notifications to my phone.</p>
					<p>
						This began as a personal toy, but now always some friends are on
						the mailing list. I do not want to make it available for the
						public, though, since it gives the technically savvy yet another
						advantage over the not so skilled, like you have it at the<a
							href="http://www.spiegel.de/auto/aktuell/online-boersen-profis-fegen-gebrauchtwagen-markt-leer-a-510009.html">
							car market</a> already.
					</p>
<p>
						Apache Lucene indexing and query is used for stemming, tokenization, number detection, and fuzzy/word vicinity querying, allowing for queries like "Find matches for keyword 'provision' with an Levensthein edit distance <= 2 and a number token in it's vicinity, not further than 2 words away in either direction". I put it on Google Appengine, using Dygraph charting for some
						visualization. See the stat page of a life specimen <a
							href="http://sniffbazar.appspot.com/Statistics.html">here</a>.
						Code is on <a href="https://github.com/curiosag/AdScraperGwt/">github</a>.
						Machine learning <a href="https://www.google.com/fusiontables/DataSource?docid=1LU-S2JpGitGmzU6x-nepnFDPZHy5L_X8jii-ZwZ2#">training data</a> is hosted at Google Fusion Tables and integrated using Googles <a href="https://developers.google.com/fusiontables/docs/v2/reference/">REST api</a>. <br><br>Initially using Scala for the scraper - esentially to get used to it - it turned out, that the Java/Scala combination gave a lot of overhead, especially considering the Google Appengine ecosystem. There also weren't really any complex data transformations or algorithms justifying the use of Scala, so I dropped it at the price of some boiler plate code and an inflation of the number of interfaces. At a later stage I used Maven for dependency resolution and packaging, which would have reduced the overhead considerably, but still I think, the task doesen't reward using 2 languages simultaneously. 
<br><br>Also the pseudo-lambdas of Java 8 weren't of much use in this situation, even though there are approaches to convert the byte code to Java 7 compliance and make it this way edible for Appengine.
							
					</p>

			<p>
						<code>technology</code>
						: Scala, Java7, Apache Lucene indexing and query, Dygraph JavaScript charting, Google fusion tables api v2, Octave/Matlab script, mainstream machine learning, JUnit, Maven, Eclipse Juno, Git, Meld diff
					</p>
		

					<p>
<h5>Machine Learing Excursus</h5>
						Seeing the significant amount of <a
							href="http://www.mieterschutzwien.at/index.php/3719/wohnungsbetrug-auf-internetplattformen/">fraudulent
							advertisements</a>, at times up to 40% in the budget range, and the reluctance or inability of some portals to
						provide effective filters and procedures to prevent it, I added some <a href="http://cs229.stanford.edu/">
							machine learning</a> to get rid of it. <br><br> 
It turned out, that valid and invalid ads aren't cleanly separable. First thinking of support vector machines or neuronal networks, eventually a simple logistic classifier with a low detection threshold (0.1) was most suitable for the task. It gives the high precision needed (>96%) in order not to filter valid ads, at the cost of a rather low recall of about 60%, which is acceptable here. <br><br>
This way everything needed in Java was the polynomial&#47;sigmoid evaluation function which was easy to write by hand. The modelling and training part I left in Matlab&#47;Octave script language. <br><br> I should mention, that linear discriminant analysis (LDA) showed a better overall performance, but provided lower precision, which was not preferrable in this case. It gives nice visualizations though, and the intersection of good and bad ads can also be seen there, confirming the initial hypothesis, that unusually low prize per square meter ratio indicates bad ads, though not always. The projection is on price, size and the "contains email" indicator.<br> <img src="./images/3DScatterPlot.gif" alt="" halign="center">
					</p>
					
				</div>
			</div>

		</section>
	</div>


	<!-- FOOTER  -->
	<div id="footer_wrap" class="outer">
		<footer class="inner">
			<p class="copyright">
				Demo Code maintained by <a href="https://github.com/curiosag">curiosag</a>
			</p>
			<p>
				Published with <a href="https://pages.github.com">GitHub Pages</a>
			</p>
		</footer>
	</div>


</body>
</html>
